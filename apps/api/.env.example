# ======================================================
# Rekon API - Environment Variables
# ======================================================
# Copy this file to `.env` in the `apps/api` directory and fill in the values.
# For production, set these in Vercel Dashboard → Settings → Environment Variables
# ======================================================

# ===========================
# General Server Config
# ===========================

# Port for the Rekon API server (default: 3001)
PORT=3001

# Frontend URL (for CORS and absolute URL building)
FRONTEND_URL=http://localhost:3000

# Node environment: development | production
NODE_ENV=development

# ===========================
# Demo Mode
# ===========================

# Enable demo mode (forces demo mode for ALL requests)
# When true, all Polymarket API calls return cached demo data
# See DEMO_MODE.md for full documentation
POLYMARKET_DEMO_MODE=false
NEXT_PUBLIC_DEMO_MODE=false

# ===========================
# Polymarket - Core Configuration
# ===========================

# Market data source: "gamma" (recommended) or "builder" (legacy)
# Gamma API is the primary source for markets & events data
POLYMARKET_MARKET_SOURCE=gamma

# Esports tag IDs for Gamma API filtering
# Main esports tag (all esports combined)
POLYMARKET_TAG_ESPORTS=64

# Optional: Per-game tag IDs for specific game filtering
# POLYMARKET_TAG_CS2=
# POLYMARKET_TAG_LOL=
# POLYMARKET_TAG_DOTA2=
# POLYMARKET_TAG_VALORANT=

# Offline mode (development-only): skip live HTTP calls and use safe fallbacks
# Set POLYMARKET_OFFLINE=true to allow the API to boot without external access
POLYMARKET_OFFLINE=false

# ===========================
# Polymarket - Builder Credentials & Attribution
# ===========================

# Builder API key (used for higher rate limits & data APIs)
# Get from: https://polymarket.com/settings/api
POLYMARKET_BUILDER_API_KEY=

# Builder signing credentials (for cryptographic order attribution)
# Required for order placement with builder attribution
POLYMARKET_BUILDER_SECRET=
POLYMARKET_BUILDER_PASSPHRASE=

# Builder attribution metadata
# Builder ID = your builder wallet address (from builder profile)
POLYMARKET_BUILDER_ID=
POLYMARKET_BUILDER_NAME=Rekon

# Builder Signing URL (for remote signing - recommended for production)
# Alternative to local signing with POLYMARKET_BUILDER_SECRET
# See: https://docs.polymarket.com/developers/builders/builder-signing-server
POLYMARKET_BUILDER_SIGNING_URL=

# Optional auth token for signing server requests
POLYMARKET_BUILDER_SIGNING_TOKEN=

# Legacy: Builder Signing Server URL (if using separate signing server)
# POLYMARKET_BUILDER_SIGNING_SERVER_URL=http://localhost:3000/sign
# POLYMARKET_BUILDER_SIGNING_SERVER_TOKEN=

# ===========================
# Polymarket - Wallet & Trading (Optional)
# ===========================

# Wallet private key for signing CLOB orders (server-side trader wallet)
# WARNING: Keep this secret. Do NOT commit real values.
# Only required if you want server-side automated trading
POLYMARKET_WALLET_PRIVATE_KEY=

# Funder address (Polymarket profile address where USDC is sent)
POLYMARKET_FUNDER_ADDRESS=

# Signature type:
# 0 = EOA/Browser Wallet (MetaMask, Rabby, etc.)
# 1 = Magic/Email Login (recommended for backend key-based trading)
POLYMARKET_SIGNATURE_TYPE=0

# Polygon Chain ID (Mainnet = 137, Testnet = 80001)
POLYMARKET_CHAIN_ID=137

# ===========================
# Neon Database (PostgreSQL)
# ===========================

# Neon serverless Postgres connection string
# Get from: https://console.neon.tech/
# Format: postgres://user:password@host/dbname?sslmode=require
#
# Recommended: Use separate branches for dev/prod
# - Development: Use a "dev" branch (safe for testing)
# - Production: Use "main" branch (protected)
NEON_DATABASE_URL=

# ===========================
# Upstash Redis (Caching & Demo Data)
# ===========================

# Upstash Redis REST API URL
# Get from: https://console.upstash.com/
# Required for demo mode data storage
UPSTASH_REDIS_REST_URL=

# Upstash Redis REST API Token
UPSTASH_REDIS_REST_TOKEN=

# Enable Redis:
# - leave empty or true to enable (if URL/token set)
# - set to false to force in-memory LRU cache only
REDIS_ENABLED=true

# ===========================
# GRID Esports API
# ===========================

# GRID API Key (required for live esports data and recommendations)
# Get from: https://grid.gg/open-access/
# Apply for free access as a startup/developer
GRID_API_KEY=

# Enable live data from GRID (default: true)
# Set to false to disable GRID live data in recommendations
ENABLE_GRID_LIVE_DATA=true

# Offline mode (development-only): skip live HTTP calls
GRID_OFFLINE=false

# ===========================
# Pandascore Esports API
# ===========================

# Pandascore API Key (for historical team stats, match history, head-to-head)
# Get from: https://app.pandascore.co/dashboard
# WARNING: This token is private - never expose to client-side code
PANDASCORE_API_KEY=

# Offline mode (development-only): skip live HTTP calls
PANDASCORE_OFFLINE=false

# ===========================
# x402 Payment Protocol
# ===========================

# Enable x402 payment system for premium features (signals, recommendations)
X402_ENABLED=false

# Require wallet signature for premium access verification
# When false (demo/MVP): Only wallet address header is checked
# When true (production): Signature verification prevents header spoofing
X402_REQUIRE_SIGNATURE_FOR_ACCESS=false

# Payment price in USDC (default: 0.05)
X402_PRICE_USDC=0.05

# Recipient wallet address (where payments are sent)
# This is also used as the serverWalletAddress for thirdweb facilitator
X402_RECIPIENT_ADDRESS=

# Network configuration
# Options: "polygon-mainnet", "polygon-amoy", "base-mainnet", "base-sepolia"
X402_NETWORK=polygon-mainnet

# ===========================
# Thirdweb (x402 Payments)
# ===========================

# Thirdweb Secret Key (required for server-side facilitator)
# Get from: https://thirdweb.com/dashboard
THIRDWEB_SECRET_KEY=

# Thirdweb Client ID (also set in apps/web/.env.local)
# Get from: https://thirdweb.com/dashboard
NEXT_PUBLIC_THIRDWEB_CLIENT_ID=

# Vault access token for server wallet authentication
# Required when using self-managed vault
THIRDWEB_VAULT_ACCESS_TOKEN=

# ===========================
# LLM Configuration (x402 Signals)
# ===========================

# LLM Provider: "openai" or "anthropic"
LLM_PROVIDER=openai

# LLM API Key (required for signal explanations)
# Get from: https://platform.openai.com/api-keys or https://console.anthropic.com/
LLM_API_KEY=

# LLM Model (default: gpt-4o-mini - cost-effective)
LLM_MODEL=gpt-4o-mini

# ===========================
# Error Tracking (Optional)
# ===========================

# Sentry DSN for error tracking
# Get from: https://sentry.io/
SENTRY_DSN=

# ======================================================
# Notes
# ======================================================
#
# 1. Demo Mode:
#    - Set POLYMARKET_DEMO_MODE=true to force demo mode for all requests
#    - Requires Redis (UPSTASH_REDIS_REST_URL) for demo data storage
#    - Run `pnpm demo:refresh` to fetch fresh demo data
#    - See DEMO_MODE.md for full documentation
#
# 2. Polymarket Builder:
#    - POLYMARKET_BUILDER_API_KEY is optional but recommended for higher rate limits
#    - POLYMARKET_BUILDER_SECRET/PASSPHRASE required for order attribution
#    - Use POLYMARKET_BUILDER_SIGNING_URL for remote signing (production)
#
# 3. x402 Payments:
#    - Requires THIRDWEB_SECRET_KEY (backend) and NEXT_PUBLIC_THIRDWEB_CLIENT_ID (frontend)
#    - Requires LLM_API_KEY for signal explanations
#    - See packages/config/src/x402.ts for full configuration
#
# 4. Esports Data:
#    - GRID_API_KEY: Required for live match data and recommendations
#    - PANDASCORE_API_KEY: Optional, for historical stats
#    - Both can be disabled with *_OFFLINE=true for development
#
# 5. Database:
#    - NEON_DATABASE_URL: Required for order persistence and analytics
#    - Redis: Required for caching and demo mode
#
# 6. Production Deployment:
#    - Set NODE_ENV=production
#    - Configure all required API keys
#    - Use production database and Redis instances
#    - Enable error tracking (Sentry)
#
# ======================================================
